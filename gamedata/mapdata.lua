-- MAPDATA should be immutable. These tables are not edited anywhere, only referenced.

local json = require("lib.json")

local MAP = {}
MAP.levelTable = {}
table.insert(MAP.levelTable,{})

local raw = love.filesystem.read("maps/ruinedChurch.json")
local jsonData = json.decode(raw)
    
for i = 1, 30 do
  local row = {}
  for i2 = 1, 30 do
    local cell = jsonData["layers"][1]["data"][i2+((i-1)*30)]
    if cell == -1 then cell = 0 end
    table.insert(row,cell)
  end
  table.insert(MAP.levelTable[1],row)
end

for i,v in ipairs (MAP.levelTable[1]) do
  for i2, v2 in ipairs (v) do
    print(v2)
  end

end

--[[MAP.levelTable = { 
  { -- level 1
    { 1,1,1,1,5,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,5,1,1,1,1,1, 1,1,1,1,6,6,6,6,1,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,5,1,4,4,1,4, 1,4,4,1,6,6,6,6,1,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,2,1,4,4,4,4, 4,4,4,1,5,1,1,1,1,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,3,3,1,2,1,4,4,4,4, 4,4,4,1,5,1,0,0,0,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,3,3,3,2,4,4,4,4,4, 4,4,4,4,5,1,0,0,0,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,3,3,1,2,1,4,4,4,4, 4,4,4,1,5,1,0,0,0,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,2,1,1,1,1,1, 1,1,1,1,5,1,1,5,1,1, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,2,1,1,1,1,1, 1,1,1,1,5,5,5,5,1,1, 0,0,0,0,0,0,0,0,0,0},
    { 1,3,3,1,2,1,0,0,0,0, 0,0,0,1,1,1,1,5,1,1, 1,1,1,1,1,1,1,1,1,1},
    
    { 1,3,3,3,2,1,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,3,3,1,2,2,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,3,3,1,2,1,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,1,1,1,0,0,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,1,5,1,0, 0,0,0,0,0,0,1,5,1,0},
    { 1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0},
    { 1,1,1,1,1,1,1,0,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1}
  } ,
  { -- level 2
  }
}--]]--

MAP.objTable = { 
  { -- level 1
    --[[{ "doorH", 5, 1 } , 
    { "doorV", 4, 6 } ,
    { "doorV", 6, 6 } ,
    { "doorV", 4, 11 } ,
    { "doorV", 6, 12 } ,
    { "doorV", 14, 6 } ,
    { "doorH", 5, 13 } ,
    { "doorH", 18, 17 } ,
    { "doorH", 15, 4 }]]--
  } ,
  { -- level 2
  } 
}

-- initial event status
-- 1 = show, 0 = hide, -1 = erase
MAP.eventStatus = {
  { -- level 1
    { "deadPriest", 1 } ,
    { "fearfulDog", 1 } ,
    { "snakes", 0 } ,
    { "snakeTrap", 1 } ,
  }
}

MAP.eventLocTable = {
  { -- level 1
    { "deadPriest", 2, 5 } ,
    { "fearfulDog", 13, 3 } ,
    { "snakes", 15, 3 } ,
    { "snakeTrap", 8, 3} ,
  }
}

MAP.msgTable = {
  { -- level 1
     [0] = "" ,
     [2] = "---ENTRANCE HALL---",
     [3] = "---PRIEST'S QUARTERS---",
     [4] = "---SANCTUARY---",
     [5] = "---BLOODIED BACK HALLWAY---",
     [6] = "---RANSACKED DOCTOR'S ROOM---"
  }
}

return MAP